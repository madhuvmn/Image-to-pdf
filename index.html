<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>A4 PDF Report with 4 Sections</title>

  <!-- Basic page reset & styling -->
  <style>
    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI",
        sans-serif;
      background: #f3f4f6;
      padding: 20px;
    }

    h1 {
      margin-bottom: 16px;
      font-size: 20px;
      text-align: center;
    }

    .toolbar {
      display: flex;
      justify-content: center;
      margin-bottom: 16px;
      gap: 12px;
    }

    .btn {
      padding: 8px 16px;
      border: none;
      border-radius: 6px;
      cursor: pointer;
      font-size: 14px;
      background: #2563eb;
      color: white;
    }

    .btn:active {
      transform: scale(0.98);
    }

    /* A4 at ~96dpi: 8.27in × 11.69in => ~794 × 1123 px */
    .page {
      width: 794px;
      height: 1123px;
      margin: 0 auto;
      background: white;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
      padding: 16px;
      position: relative;
    }

    /* 2x2 grid for sections */
    .sections-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-template-rows: 1fr 1fr;
      gap: 12px;
      height: 100%;
    }

    .section {
      border: 1px solid #e5e7eb;
      border-radius: 8px;
      padding: 8px;
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .section-title {
      font-size: 12px;
      font-weight: 600;
      margin-bottom: 4px;
      text-transform: uppercase;
      color: #4b5563;
    }

    .cards {
      display: flex;
      flex-direction: column;
      gap: 6px;
      flex: 1;
    }

    .card {
      border-radius: 6px;
      border: 1px solid #e5e7eb;
      padding: 6px;
      font-size: 11px;
      display: flex;
      flex-direction: column;
      gap: 4px;
      background: #f9fafb;
      flex: 1;
    }

    .card-header-image {
      padding: 0;
      overflow: hidden;
      background: #111827;
    }

    .card-header-image img {
      width: 100%;
      height: 80px;
      object-fit: cover;
      display: block;
    }

    .card-title {
      font-weight: 600;
      font-size: 11px;
      color: #111827;
    }

    .card-text {
      font-size: 10px;
      color: #4b5563;
      line-height: 1.3;
    }

    /* Just to show page border when scrolling */
    .page-wrapper {
      display: flex;
      justify-content: center;
    }
  </style>
</head>
<body>
  <h1>A4 Report – 4 Sections (2x2), Each with Image Header</h1>

  <div class="toolbar">
    <button class="btn" onclick="generatePDF()">Generate PDF</button>
  </div>

  <!-- REPORT CONTENT TO CONVERT INTO PDF -->
  <div class="page-wrapper">
    <div class="page" id="report">
      <div class="sections-grid">
        <!-- SECTION 1 -->
        <div class="section">
          <div class="section-title">Section 1</div>
          <div class="cards">
            <div class="card card-header-image">
              <!-- Image MUST be in the same folder as this HTML file -->
              <img src="header1.jpg" alt="Header 1" />
            </div>
            <div class="card">
              <div class="card-title">Summary / Details</div>
              <div class="card-text">
                This is card 2 for Section 1. You can put summary, stats or any
                other content here.
              </div>
            </div>
            <div class="card">
              <div class="card-title">Additional Info</div>
              <div class="card-text">
                This is card 3 for Section 1. Add more descriptive text, notes
                or small tables.
              </div>
            </div>
          </div>
        </div>

        <!-- SECTION 2 -->
        <div class="section">
          <div class="section-title">Section 2</div>
          <div class="cards">
            <div class="card card-header-image">
              <img src="header2.jpg" alt="Header 2" />
            </div>
            <div class="card">
              <div class="card-title">Summary / Details</div>
              <div class="card-text">
                This is card 2 for Section 2. Content can be dynamic based on
                your data.
              </div>
            </div>
            <div class="card">
              <div class="card-title">Additional Info</div>
              <div class="card-text">
                Card 3 for Section 2. You can also style this differently if
                needed.
              </div>
            </div>
          </div>
        </div>

        <!-- SECTION 3 -->
        <div class="section">
          <div class="section-title">Section 3</div>
          <div class="cards">
            <div class="card card-header-image">
              <img src="header3.jpg" alt="Header 3" />
            </div>
            <div class="card">
              <div class="card-title">Summary / Details</div>
              <div class="card-text">
                Card 2 for Section 3. Replace this text with real report
                content.
              </div>
            </div>
            <div class="card">
              <div class="card-title">Additional Info</div>
              <div class="card-text">
                Card 3 for Section 3. You can also add lists, small tables,
                etc.
              </div>
            </div>
          </div>
        </div>

        <!-- SECTION 4 -->
        <div class="section">
          <div class="section-title">Section 4</div>
          <div class="cards">
            <div class="card card-header-image">
              <img src="header4.jpg" alt="Header 4" />
            </div>
            <div class="card">
              <div class="card-title">Summary / Details</div>
              <div class="card-text">
                Card 2 for Section 4. For example: performance metrics, charts,
                etc.
              </div>
            </div>
            <div class="card">
              <div class="card-title">Additional Info</div>
              <div class="card-text">
                Card 3 for Section 4. Final notes, disclaimers or instructions.
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- jsPDF + html2canvas from CDN -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

  <script>
    async function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF("p", "pt", "a4"); // portrait, points, A4

      const reportElement = document.getElementById("report");

      // Use html2canvas to convert the report DOM into a canvas
      const canvas = await html2canvas(reportElement, {
        scale: 2, // higher scale -> better quality (but larger PDF)
        useCORS: true,
      });

      const imgData = canvas.toDataURL("image/png");

      const pdfWidth = doc.internal.pageSize.getWidth();
      const pdfHeight = doc.internal.pageSize.getHeight();

      // Canvas to PDF dimensions (keep aspect ratio)
      const imgWidth = pdfWidth;
      const imgHeight = (canvas.height * imgWidth) / canvas.width;

      let positionY = 0;

      // If content height is larger than one page, we can add more pages (simple logic)
      if (imgHeight <= pdfHeight) {
        doc.addImage(imgData, "PNG", 0, 0, imgWidth, imgHeight);
      } else {
        // Multi-page (basic slicing)
        let remainingHeight = imgHeight;
        let pageCanvas = document.createElement("canvas");
        let pageCtx = pageCanvas.getContext("2d");

        const pageHeightPx = (canvas.width * pdfHeight) / pdfWidth; // height in px that fits in one PDF page

        let pageOffset = 0;

        while (remainingHeight > 0) {
          // Set canvas size for one "page slice"
          pageCanvas.width = canvas.width;
          pageCanvas.height = Math.min(pageHeightPx, remainingHeight);

          // Draw slice
          pageCtx.clearRect(0, 0, pageCanvas.width, pageCanvas.height);
          pageCtx.drawImage(
            canvas,
            0,
            pageOffset,
            canvas.width,
            pageCanvas.height,
            0,
            0,
            canvas.width,
            pageCanvas.height
          );

          const pageData = pageCanvas.toDataURL("image/png");
          if (positionY > 0) {
            doc.addPage();
          }
          doc.addImage(pageData, "PNG", 0, 0, imgWidth, pdfHeight);

          remainingHeight -= pageHeightPx;
          pageOffset += pageHeightPx;
          positionY += pdfHeight;
        }
      }

      doc.save("a4-report-4-sections.pdf");
    }
  </script>
</body>
</html>
